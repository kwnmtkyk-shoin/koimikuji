<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹ãŠã¿ãã˜</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'pink-light': '#fce7f3', // Very light pink background
                        'pink-medium': '#f9a8d4', // Display background
                        'pink-dark': '#ec4899', // Highlight/Text color
                        'darker-pink': '#d61d7b', // Button pressed color
                    },
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans JP', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Custom styles for cute effects */
        .roulette-number {
            /* Text animation for spinning effect */
            transition: all 0.1s ease-in-out;
            font-size: 8rem; /* éå¸¸ã«å¤§ããªæ–‡å­— */
        }
        
        .draw-button, .reset-button {
            transition: all 0.15s ease-in-out;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        .draw-button:hover:not(:disabled), .reset-button:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 10px 15px -3px rgba(236, 72, 153, 0.3), 0 4px 6px -4px rgba(236, 72, 153, 0.2);
        }
        .draw-button:active:not(:disabled), .reset-button:active:not(:disabled) {
             transform: translateY(0);
        }

        /* Responsive font size for roulette number */
        @media (max-width: 640px) {
            .roulette-number {
                font-size: 5rem;
            }
        }
    </style>
</head>
<body class="bg-pink-light min-h-screen p-4 flex items-center justify-center font-sans">
    <div id="app-container" class="w-full max-w-lg bg-white p-6 md:p-10 rounded-3xl shadow-2xl">
        
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¨ãƒªã‚¢ -->
        <header class="text-center mb-8">
            <h1 class="text-5xl font-extrabold text-pink-dark mb-2 tracking-tight">
                <span class="inline-block transform rotate-[-5deg] mr-2">ğŸ’–</span> æ‹ãŠã¿ãã˜
            </h1>
            <p class="text-gray-500 text-lg">ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã€ä»Šæ—¥ã®é‹å‘½ã®æ•°å­—ã‚’å¼•ã“ã†ï¼</p>
        </header>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
        <main id="main-content">
            <!-- ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã¨ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
            <div id="roulette-container" class="text-center p-6 border-4 border-pink-dark border-dashed rounded-3xl transition-opacity duration-500">
                <!-- ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆæ•°å­—è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
                <div id="roulette-display" class="roulette-number font-extrabold text-pink-dark mb-8 h-36 flex items-center justify-center bg-pink-light rounded-xl shadow-inner">
                    ?
                </div>
                
                <!-- ãŠã¿ãã˜ã‚’å¼•ããƒœã‚¿ãƒ³ (åˆæœŸè¡¨ç¤º) -->
                <button id="draw-button" class="draw-button w-full px-8 py-4 bg-pink-dark text-white text-2xl font-bold rounded-full shadow-lg hover:bg-darker-pink transition-colors">
                    ãŠã¿ãã˜ã‚’å¼•ã
                </button>
                
                <!-- ã‚‚ã†ä¸€åº¦å¼•ããƒœã‚¿ãƒ³ (åˆæœŸã¯éè¡¨ç¤º) -->
                <button id="reset-button" class="reset-button hidden mt-4 w-full px-8 py-4 bg-white text-pink-dark text-2xl font-bold rounded-full shadow-lg hover:bg-pink-light transition-colors">
                    ã‚‚ã†ä¸€åº¦å¼•ã
                </button>
            </div>
        </main>

    </div>

    <script type="module">
        // æ‹ãŠã¿ãã˜ã®çµæœãƒ‡ãƒ¼ã‚¿ (çµæœã¯ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã®ã¿å‡ºåŠ›ã•ã‚Œã€ç”»é¢ã«ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“)
        const FORTUNES = [
            { grade: "å¤§å‰ (ã ã„ãƒ»ãã¡)", advice: "æœ€é«˜ã®é‹æ°—ï¼ç©æ¥µçš„ãªè¡Œå‹•ãŒå‰ã¨å‡ºã¾ã™ã€‚å‘Šç™½ã‚„å¤§åˆ‡ãªæ±ºæ–­ã¯ä»Šæ—¥ãŒãƒãƒ£ãƒ³ã‚¹ã§ã™ã€‚" },
            { grade: "æ‹å‰ (ã“ã„ãƒ»ãã¡)", advice: "ç‰‡æ€ã„ãŒå¶ã†äºˆæ„Ÿï¼ç›¸æ‰‹ã®èˆˆå‘³ã‚„è¶£å‘³ã‚’ãƒªã‚µãƒ¼ãƒã—ã¦ã¿ã¦ã€‚å…±é€šã®è©±é¡ŒãŒæ„›ã‚’è‚²ã¿ã¾ã™ã€‚" },
            { grade: "ä¸­å‰ (ã¡ã‚…ã†ãƒ»ãã¡)", advice: "é †èª¿ãªé€²å±•ãŒè¦‹è¾¼ã‚ã¾ã™ã€‚ç„¦ã‚‰ãšã€è‡ªç„¶ä½“ã§æ¥ã—ã¾ã—ã‚‡ã†ã€‚ã‚ãªãŸã®é­…åŠ›ãŒä¼ã‚ã‚Šã¾ã™ã€‚" },
            { grade: "å°å‰ (ã—ã‚‡ã†ãƒ»ãã¡)", advice: "å°‘ã—ã®åŠªåŠ›ãŒå¿…è¦ã§ã™ã€‚ãƒ¡ãƒ¼ãƒ«ã‚„SNSã‚ˆã‚Šã‚‚ã€å¯¾é¢ã§ã®ä¼šè©±ã‚’å¿ƒãŒã‘ã‚‹ã¨å‰ã€‚" },
            { grade: "å‰ (ãã¡)", advice: "ç¾çŠ¶ç¶­æŒã§OKã€‚ãŸã ã—ã€ãƒãƒ³ãƒãƒªã«ã¯è¦æ³¨æ„ã€‚å°ã•ãªã‚µãƒ—ãƒ©ã‚¤ã‚ºã§é–¢ä¿‚ã«åˆºæ¿€ã‚’ä¸ãˆã¦ã€‚" },
            { grade: "å¾…ã¡å‰ (ã¾ã¡ãƒ»ãã¡)", advice: "é‹å‘½ã®å‡ºä¼šã„ãŒè¿‘ã¥ã„ã¦ã„ã¾ã™ã€‚ã„ã¤ã‚‚ã¨é•ã†å ´æ‰€ã«è¶³ã‚’é‹ã‚“ã§ã¿ã¾ã—ã‚‡ã†ã€‚" },
            { grade: "å¾®å‰ (ã³ãƒ»ãã¡)", advice: "å‹‡æ°—ã‚’å‡ºã—ã¦ä¸€æ­©è¸ã¿å‡ºã™æ™‚ã§ã™ã€‚å°ã•ãªè¡Œå‹•ã®ç©ã¿é‡ã­ãŒå¤§ããªæ„›ã¸ã¨ç¹‹ãŒã‚Šã¾ã™ã€‚" },
            { grade: "æ„›ã®å…†ã— (ã‚ã„ãƒ»ã®ãƒ»ãã–ã—)", advice: "ç´ æ•µãªç•°æ€§ã¨ã®äºˆæœŸã›ã¬å‡ºä¼šã„ãŒã€‚ä»Šæ—¥ã¯ã„ã¤ã‚‚ã‚ˆã‚Šã‚ªã‚·ãƒ£ãƒ¬ã‚’ã—ã¦å‡ºã‹ã‘ã¾ã—ã‚‡ã†ã€‚" },
            { grade: "çµã³å‰ (ã‚€ã™ã³ãƒ»ãã¡)", advice: "æ—¢ã«çŸ¥ã£ã¦ã„ã‚‹äººã¨ã®é–¢ä¿‚ãŒæ·±ã¾ã‚‹å…†ã—ã€‚ç–é ã«ãªã£ã¦ã„ã‚‹äººã«é€£çµ¡ã‚’å–ã£ã¦ã¿ã¦ã€‚" },
            { grade: "è©¦ç·´å‰ (ã—ã‚Œã‚“ãƒ»ãã¡)", advice: "è©¦ã•ã‚Œã‚‹æ‹ã§ã™ãŒã€è«¦ã‚ãªã‘ã‚Œã°å¿…ãšå ±ã‚ã‚Œã¾ã™ã€‚ã‚ãªãŸã®èª å®Ÿã•ã‚’è¦‹ã›ã‚‹æ™‚ã§ã™ã€‚" },
            { grade: "åŠªåŠ›å‰ (ã©ã‚Šã‚‡ããƒ»ãã¡)", advice: "åŠªåŠ›ãŒå ±ã‚ã‚Œã‚‹é‹å‹¢ã€‚è«¦ã‚ãšã€ç¶™ç¶šã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚ç›¸æ‰‹ã‚’æ€ã†æ°—æŒã¡ã‚’å½¢ã«ã—ã¾ã—ã‚‡ã†ã€‚" },
            { grade: "çµ†å‰ (ããšãªãƒ»ãã¡)", advice: "å‹æƒ…ã‹ã‚‰æ‹ã¸ç™ºå±•ã™ã‚‹ã‹ã‚‚ã€‚å…±é€šã®è¶£å‘³ã‚„æ™‚é–“ã‚’ä¸€ç·’ã«éã”ã™æ©Ÿä¼šã‚’å¢—ã‚„ã—ã¦ã¿ã¦ã€‚" },
            { grade: "å¤‰åŒ–ã®å‰ (ã¸ã‚“ã‹ãƒ»ã®ãƒ»ãã¡)", advice: "çŠ¶æ³ãŒå¤§ããå¤‰ã‚ã‚‹æ™‚æœŸã€‚å¤‰åŒ–ã‚’æã‚Œãšã«å—ã‘å…¥ã‚Œã‚Œã°ã€å¹¸ç¦ãŒå¾…ã£ã¦ã„ã¾ã™ã€‚" },
            { grade: "å¾©æ´»å‰ (ãµã£ã‹ã¤ãƒ»ãã¡)", advice: "ä¸€åº¦çµ‚ã‚ã£ãŸæ‹ãŒå†ã³å‹•ãå‡ºã™ã‹ã‚‚ã€‚éå»ã‚’æ¸…ç®—ã—ã€æ–°ã—ã„æ°—æŒã¡ã§å‘ãåˆã£ã¦ã€‚" },
            { grade: "æº€æœˆå‰ (ã¾ã‚“ã’ã¤ãƒ»ãã¡)", advice: "æº€æœˆã®å¤œã«é¡˜ã„ãŒå¶ã„ã‚„ã™ã„é‹å‹¢ã€‚ãƒ­ãƒãƒ³ãƒãƒƒã‚¯ãªå ´æ‰€ã§ã®ãƒ‡ãƒ¼ãƒˆã‚’è¨ˆç”»ã—ã¦ã€‚" },
            { grade: "èŠ±é–‹ãå‰ (ã¯ãªãƒ»ã²ã‚‰ããƒ»ãã¡)", advice: "ã‚ãªãŸã®æ‰èƒ½ã¨é­…åŠ›ãŒæº€é–‹ã«ã€‚è‡ªä¿¡ã‚’æŒã£ã¦è¡Œå‹•ã™ã‚‹ã“ã¨ã§ã€ã•ã‚‰ã«è¼ãã¾ã™ã€‚" },
            { grade: "ç©ã‚„ã‹å‰ (ãŠã ã‚„ã‹ãƒ»ãã¡)", advice: "å¹³ç©ã§å¿ƒæ¸©ã¾ã‚‹é–¢ä¿‚ãŒç¶šãäºˆæ„Ÿã€‚æ—¥å¸¸ã®ä¸­ã§æ„Ÿè¬ã®æ°—æŒã¡ã‚’ä¼ãˆã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚" },
            { grade: "æ°—ã¾ãã‚Œå‰ (ãã¾ãã‚Œãƒ»ãã¡)", advice: "ç›¸æ‰‹ã®æ°—æŒã¡ãŒå¤‰ã‚ã‚Šã‚„ã™ã„æ™‚ã€‚æŒ¯ã‚Šå›ã•ã‚Œãšã€ã©ã£ã—ã‚Šæ§‹ãˆã‚‹å§¿å‹¢ãŒå¤§äº‹ã§ã™ã€‚" },
            { grade: "ç©ºå›ã‚Š (ã‹ã‚‰ã¾ã‚ã‚Š)", advice: "ç„¦ã‚‹ã¨é€†åŠ¹æœã€‚ä¸€åº¦ç«‹ã¡æ­¢ã¾ã£ã¦ã€æœ¬å½“ã«å¤§åˆ‡ãªã“ã¨ã¯ä½•ã‹å†·é™ã«è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚" },
            { grade: "æ‹ã®åµ (ã“ã„ãƒ»ã®ãƒ»ã‚ã‚‰ã—)", advice: "æ„è¦‹ã®è¡çªãŒã‚ã‚‹ã‹ã‚‚ã€‚èª å®Ÿãªå¯¾è©±ã¨ç›¸æ‰‹ã¸ã®æ€ã„ã‚„ã‚ŠãŒè§£æ±ºã®éµã§ã™ã€‚" },
            { grade: "è¦æ³¨æ„ (ã‚ˆã†ã¡ã‚…ã†ã„)", advice: "èª˜æƒ‘ãŒå¤šã„æ™‚ã§ã™ã€‚æœ¬å‘½ä»¥å¤–ã«ç›®ã‚’å‘ã‘ãªã„ã‚ˆã†ã€ã—ã£ã‹ã‚Šã¨å¿ƒã‚’å¼•ãç· ã‚ã¦ã€‚" },
            { grade: "é å›ã‚Š (ã¨ãŠã¾ã‚ã‚Š)", advice: "ã™ãã«ã¯é€²å±•ã—ãªã„ã‹ã‚‚ã€‚ä»Šã¯è‡ªå·±æˆé•·ã«å°‚å¿µã™ã‚‹æ™‚æœŸã¨è€ƒãˆã¾ã—ã‚‡ã†ã€‚" },
            { grade: "å¿è€ (ã«ã‚“ãŸã„)", advice: "è¾›æŠ±ã®æ™‚ã§ã™ã€‚æ™‚æœŸã‚’å¾…ã¦ã°ã€å¿…ãšè‰¯ã„æ–¹å‘ã«å‘ã‹ã„ã¾ã™ã€‚ç„¦ã‚Šã¯ç¦ç‰©ã€‚" },
            { grade: "å‡¶ (ãã‚‡ã†)", advice: "ä»Šæ—¥ã¯å°‘ã—é™ã‹ã«éã”ã—ã¾ã—ã‚‡ã†ã€‚å¤§åˆ‡ãªè¡Œå‹•ã¯æ§ãˆã‚ã«ã€‚æ˜æ—¥ã«æœŸå¾…ã—ã¦ã­ã€‚" },
        ];

        // DOMè¦ç´ ã®å–å¾—
        const rouletteDisplay = document.getElementById('roulette-display');
        const drawButton = document.getElementById('draw-button');
        const resetButton = document.getElementById('reset-button');
        
        let fortuneMap = {}; // 1-24ã®æ•°å­—ã¨çµæœã‚’ç´ã¥ã‘ã‚‹ãƒãƒƒãƒ—
        let spinInterval;
        let finalNumber = 0; // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãŒåœæ­¢ã™ã‚‹æœ€çµ‚ç•ªå·

        // Fisher-Yates shuffleã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ : çµæœã®ãƒ©ãƒ³ãƒ€ãƒ å‰²ã‚Šå½“ã¦ã«ä½¿ç”¨
        const shuffleArray = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        };

        // åˆæœŸåŒ–å‡¦ç†: ãŠã¿ãã˜çµæœã®ãƒªã‚»ãƒƒãƒˆã¨UIã®åˆæœŸçŠ¶æ…‹ã¸ã®å¾©å…ƒ
        const initializeFortune = () => {
            // 1. çµæœãƒªã‚¹ãƒˆã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã€æ•°å­—ã«å‰²ã‚Šå½“ã¦ã‚‹
            const shuffledFortunes = shuffleArray([...FORTUNES]);
            fortuneMap = {};
            for (let i = 1; i <= 24; i++) {
                fortuneMap[i] = shuffledFortunes[i - 1];
            }
            
            // 2. UIã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
            rouletteDisplay.textContent = '?';
            drawButton.disabled = false;
            drawButton.classList.remove('opacity-50', 'cursor-not-allowed');
            drawButton.classList.remove('hidden'); // 'ãŠã¿ãã˜ã‚’å¼•ã'ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
            resetButton.classList.add('hidden');   // 'ã‚‚ã†ä¸€åº¦å¼•ã'ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
        };

        // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆé–‹å§‹å‡¦ç†
        const startRoulette = () => {
            // ãƒœã‚¿ãƒ³ã‚’éæ´»æ€§åŒ–
            drawButton.disabled = true;
            drawButton.classList.add('opacity-50', 'cursor-not-allowed');

            // æœ€çµ‚æ±ºå®šã™ã‚‹ç•ªå·ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é¸ã¶ (1ã€œ24)
            finalNumber = Math.floor(Math.random() * 24) + 1;
            
            const SPIN_DURATION = 3000; // 3.0ç§’é–“ã‚¹ãƒ”ãƒ³
            const startTimestamp = Date.now();

            // ã‚¹ãƒ”ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹
            spinInterval = setInterval(() => {
                const elapsed = Date.now() - startTimestamp;

                if (elapsed < SPIN_DURATION) {
                    // ã‚¹ãƒ”ãƒ³ä¸­: 1ã‹ã‚‰24ã®æ•°å­—ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é«˜é€Ÿè¡¨ç¤º
                    let spinningNumber = Math.floor(Math.random() * 24) + 1;
                    rouletteDisplay.textContent = spinningNumber;
                } else {
                    // åœæ­¢å‡¦ç†
                    clearInterval(spinInterval);
                    rouletteDisplay.textContent = finalNumber; // æœ€çµ‚ç•ªå·ã‚’è¡¨ç¤º
                    
                    // çµæœè¡¨ç¤ºå‡¦ç†ï¼ˆãƒœã‚¿ãƒ³åˆ‡ã‚Šæ›¿ãˆã®ã¿ï¼‰ã‚’å‘¼ã³å‡ºã™
                    setTimeout(() => drawFortune(finalNumber), 500); 
                }
            }, 50); // 50msã”ã¨ã«æ•°å­—ã‚’æ›´æ–°
        };

        // ãŠã¿ãã˜ã‚’å¼•ãå‡¦ç†ï¼ˆãƒœã‚¿ãƒ³åˆ‡ã‚Šæ›¿ãˆã®ã¿è¡Œã†ï¼‰
        const drawFortune = (number) => {
            // å†…éƒ¨çš„ã«ã¯çµæœã‚’å–å¾—ï¼ˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã®ã¿å‡ºåŠ›ï¼‰
            const result = fortuneMap[number]; 
            console.log(`å¼•ã‹ã‚ŒãŸæ•°å­—: ${number}ç•ªã€‚é‹å‹¢: ${result.grade} - ã‚¢ãƒ‰ãƒã‚¤ã‚¹: ${result.advice}`);

            // UIã‚’æ›´æ–°: drawãƒœã‚¿ãƒ³ã‚’éš ã—ã€resetãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
            drawButton.classList.add('hidden'); 
            resetButton.classList.remove('hidden'); 
        };

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        drawButton.addEventListener('click', startRoulette);
        resetButton.addEventListener('click', initializeFortune);

        // ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«åˆæœŸåŒ–ã‚’å®Ÿè¡Œ
        window.onload = initializeFortune;

    </script>
</body>
</html>

